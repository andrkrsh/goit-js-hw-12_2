{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47661758-276cd75f39684298817518b5c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImg(searchQuery, page = 1, perPage = 15) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage\n    });\n    try {\n        const response = await axios.get(`${BASE_URL}?${params}`);\n        return response.data;\n    } catch (error) {\n        console.error(error);\n    }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loaderBtn = document.querySelector('.loader-btn');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet lightbox;\n\nexport function renderCard(hits, gallery) {\n\n    const markup = hits.map(hit => createGalleryCard(hit)).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        lightbox = new SimpleLightbox('.gallery a');\n    }\n}\n\nfunction createGalleryCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n    <a class=\"gallery-item\" href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p><span>Likes:</span> ${likes}</p>\n        <p><span>Views:</span> ${views}</p>\n        <p><span>Comments:</span> ${comments}</p>\n        <p><span>Downloads:</span> ${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function clearGallery(gallery) {\n    gallery.innerHTML = '';\n}\n\nexport function showErrorMessage(message) {\n    iziToast.error({\n        message: message,\n        messageColor: '#fff',\n        position: 'topRight',\n        backgroundColor: '#5b8cd1',\n    });\n}\n\nexport function showLoadingIndicator() {\n    const loader = document.createElement('div');\n    loader.className = 'loader';\n    document.body.appendChild(loader);\n}\n\nexport function hideLoadingIndicator() {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        document.body.removeChild(loader);\n    }\n}\n\nexport function showLoadMoreBtn() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreBtn() {\n    loadMoreBtn.classList.add('hidden');\n\n}\n\nexport function showLoadingIndicatorBtn() {\n    loaderBtn.classList.remove('hidden')\n}\n\nexport function hideLoadingIndicatorBtn() {\n    loaderBtn.classList.add('hidden');\n\n}","import { fetchImg } from './js/pixabay-api.js';\nimport { renderCard, showErrorMessage, showLoadingIndicator, hideLoadingIndicator, clearGallery, showLoadMoreBtn, hideLoadMoreBtn, showLoadingIndicatorBtn, hideLoadingIndicatorBtn } from './js/render-functions.js';\n\n\n\nconst searchForm = document.querySelector(\"form\");\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n    e.preventDefault();\n    hideLoadMoreBtn();\n    clearGallery(gallery);\n\n    const form = e.currentTarget;\n    searchQuery = form.elements.query.value.trim();\n    page = 1;\n\n    if (searchQuery === '') {\n        showErrorMessage(\"Please enter a search query.\");\n        return;\n    }\n\n    showLoadingIndicator();\n\n    fetchImg(searchQuery, page)\n        .then(data => {\n            hideLoadingIndicator();\n\n            if (data.hits.length === 0) {\n                showErrorMessage(\"Sorry, there are no images matching your search query. Please try again!\");\n                return;\n            }\n\n            totalHits = data.totalHits;\n\n            renderCard(data.hits, gallery);\n\n            if (data.hits.length < 15 || gallery.children.length >= totalHits) {\n                showEndOfResultsMessage();\n            } else {\n                showLoadMoreBtn();\n            }\n        })\n        .catch(error => {\n            console.log(error);\n            showErrorMessage(\"Failed to fetch images. Please try again later.\");\n        });\n\n    e.currentTarget.reset();\n}\n\n\nfunction onLoadMore() {\n    page += 1;\n    showLoadingIndicatorBtn();\n    fetchImg(searchQuery, page)\n        .then(data => {\n            hideLoadingIndicator();\n            renderCard(data.hits, gallery);\n            hideLoadingIndicatorBtn();\n\n            if (gallery.children.length >= totalHits) {\n                hideLoadMoreBtn();\n                showEndOfResultsMessage();\n            }\n\n            smoothScroll();\n        })\n        .catch(error => {\n            hideLoadingIndicator();\n            console.log(error);\n            showErrorMessage(\"Failed to fetch images. Please try again later.\");\n        });\n\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["API_KEY","BASE_URL","fetchImg","searchQuery","page","perPage","params","axios","error","loaderBtn","loadMoreBtn","lightbox","renderCard","hits","gallery","markup","hit","createGalleryCard","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showErrorMessage","message","iziToast","showLoadingIndicator","loader","hideLoadingIndicator","showLoadMoreBtn","hideLoadMoreBtn","showLoadingIndicatorBtn","hideLoadingIndicatorBtn","searchForm","totalHits","onSearch","onLoadMore","data","smoothScroll","cardHeight"],"mappings":"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"}